@use 'breakpoints' as *;

/* ============================================================================
   LAYOUT & STRUCTURE
   ============================================================================ */

// Reset global
* {
    box-sizing: border-box;
}

// Conteneur principal
.container {
    max-width: 100%;
    overflow-x: hidden;
}

// Layouts WordPress
.is-layout-grid {
    &:has(img) {
        overflow: hidden; 
    }

    > img {
        width: auto;
        height: 100%;
    }

    @media screen and (width <= 768px) {
        grid-template-columns: 1fr;
        grid-auto-rows: auto;
        row-gap: 2em;

        // > div {
        //     grid-column: span 1;
        // }

        .wp-block-spacer {
            display: none;
        }

        
    }
}

.hide-on-mobile {
    @include max-width('md') {
        display: none;
    }
}

.is-style-2-columns {
    @include max-width('md') {
        column-count: 1;
    }
}

.is-style-overflow-right {
    position: relative;
    right: -100px;
    z-index: 20;

    @include max-width('md') {
        right: 0;
    }
}

.is-style-overflow-left {
    position: relative;
    left: -100px;
    z-index: 20;
}

.is-layout-constrained:has(img):not(section, .multi-img-col) {
    bottom: 0;
    height: fit-content;
}

.wp-block-group:is(.absolute) {
    width: fit-content;
}

// Hauteur complète
.full-height {
    height: 100% !important;

    img {
        height: 100%;
    }
}

.float-left {
    float: right;
    top: 8px;
}

// Flexbox
.flex {
    display: flex;
    flex-wrap: wrap;

    &.nowrap {
        flex-wrap: nowrap;
    }

    &.column {
        flex-direction: column;
    }
}

// Justification et alignement
.justify-stretch {
    justify-content: stretch;
}

.justify-center {
    justify-content: center;
}

.align-center {
    align-items: center;
}

.self-center {
    align-self: center;
}

.self-end {
    align-self: flex-end;
}

// Largeurs
.w-50 {
    width: 50%;
    flex-grow: 2;
}

// Colonnes
.col-2 {
    gap: 2em;

    > div {
        height: 100%;
        max-width: calc((100% - 2em) / 2);
        width: 100%;
        min-width: 250px;
        flex-grow: 2;
    }

    .img-wrapper {
        height: auto;
        overflow: hidden;
        width: fit-content;

        img {
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
    }
}

.col-left {
    width: 50%;
    height: 100%;
}

.col-right {
    width: 50%;
    height: 100%;
}

// Bordures
hr {
    &.bw-20 {
        width: 30%;
    }

    &.lavande {
        border: 1px solid var(--light);
    }
}

.border {
    border-style: solid;

    &.border-1 {
        border-width: var(--border-w-1);
    }

    &.border-2 {
        border-width: var(--border-w-2);
    }

    &.border-3 {
        border-width: var(--border-w-3);
    }

    &.border-beige {
        border-color: var(--beige);
    }

    &.border-lavande {
        border-color: var(--Lavande-fonce);
    }
}

/* Positions */
.absolute {
    position: absolute;
    z-index: 0;

    @include max-width('md') {
        position: relative;
    }
}

.relative {
    position: relative;
}

/* Spacing */

.gap-1 {
    gap: var(--gap-1);
}

.gap-2 {
    gap: var(--gap-2);
}

.gap-3 {
    gap: var(--gap-3);
}

.mb-5 {
    margin-bottom: 5em;
}

.container {
    margin: 0 auto;
}

.contained {
    max-width: 1000px;
    margin: 0 auto;
}

// Contenu des articles
.entry-content {
    position: relative;

    &.contained {
        max-width: 80%;
        margin: 5em auto;
    }

    @include max-width('md') {
        > *:not(.alignfull, .wp-block-cover) {
            margin-left: 1em;
            margin-right: 1em;
        }

        .has-border-color{
            &:not(:last-child) {
                border-bottom: 1px solid var(--wp--preset--color--beige);
            }

            // > * :has([style*="border-right-width:1px;"]) {
            //     border-left-style: solid;
            //     border-left-width: 1px;
            // }

            // > * :has([style*="border-left-width:1px;"]) {
            //     border-right-width: 1px;
            //     border-right-style: solid;
            // }
        }

        // Ajouter border-left aux éléments avec border-right
        *[style*="border-right-width: 1px;"] {
            border-left-width: 1px;
            border-left-style: solid;
        }

        *[style*="border-left-width: 1px;"] {
            border-right-width: 1px;
            border-right-style: solid;
        }
    }
}

// Images spécifiques
.wp-image-295 {
    width: inherit;
    float: right;
}

// Largeur complète
.fullwidth {
    width: 100%;
    margin-top: 4em;

    > *:not(.encart-full) {
        max-width: 80%;
        margin: 16px auto;
    }
}

// Hauteur complète
.fullheight {
    height: 100%;
    min-height: 100vh;
}

// Page spécifique - Activités
.page-template-page-activites {
    .h1-md {
        font-size: 3.5em;
        margin-bottom: 0.3em;
        color: var(--Lavande-fonce);

        &::after {
            content: "";
            display: block;
            width: 30%;
            height: 1px;
            margin-top: 0.5em;
            background-color: var(--Lavande-fonce);
        }
    }
}

// Couleurs de fond
.bg-olive {
    background-color: var(--Olive);
}

.bg-beige {
    background-color: var(--beige);
}